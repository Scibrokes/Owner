---
title: "[<span style='color:goldenrod'>雷欧 ∪ 瑞欧，黄联富</span>](https://beta.rstudioconnect.com/content/3091/ryo-eng.html)"
subtitle: '个人简历'
author: "[雷欧 ∪ 瑞欧，黄联富](https://englianhu.github.io) <img src='www/ENG.png'
  width='24' align='center' valign='middle'> <img src='www/me light mode.jpg'
  width='17' align='center' valign='middle'>®"
tags: [计量经济学, 量化圈, 娱乐圈, ®, Python, ®Studio]
date: "22-Oct-1984"
output:
  html_document:
    mathjax: https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js
    number_sections: yes
    highlight: haddock
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
    code_folding: hide
    css: CSSBackgrounds.css
    fig_caption: yes
  word_document:
    mathjax: https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js
    number_sections: yes
    highlight: haddock
    self_contained: no
    theme: lumen
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
    code_folding: hide
    css: CSSBackgrounds.css
  pdf_document:
    mathjax: https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js
    number_sections: yes
    highlight: haddock
    self_contained: no
    theme: lumen
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
    code_folding: hide
    css: CSSBackgrounds.css
always_allow_html: yes
resource_files:
- www/188bet.jpg
- www/20160910_121813.gif
- www/360doc.jpeg
- www/7live.jpg
- www/7live_36x36.jpg
- www/aaa1.jpg
- www/aaa2.jpg
- www/aaaa.jpg
- www/aboutme.jpg
- www/aboutme_36x36.jpg
- www/academia.jpg
- www/AIA.png
- www/ali.jpg
- www/ali_36x36.jpg
- www/alibaba1.jpg
- www/alibaba2.jpg
- www/anr.jpg
- www/anr_36x36.jpg
- www/apple.jpg
- www/Arduino.png
- www/AskUbuntu.png
- www/bettingforum.jpg
- www/bettingforum_36x36.jpg
- www/betworks.jpg
- www/BiliBili.png
- www/biostatistic.jpg
- www/biostatistic_36x36.jpg
- www/bitbucket.jpg
- www/bitbucket_36x36.jpg
- www/cari.png
- www/caspo.jpg
- www/centOS.jpg
- www/centOS_36x36.jpg
- www/Chris_Evans_Captain_America.jpg
- www/cos.jpg
- www/cos_36x36.jpg
- www/coursera.jpg
- www/coursera_36x36.jpg
- www/csdn.jpg
- www/csdn_36x36.jpg
- www/csdn2.png
- www/dashencaicai2.jpg
- www/discord1.jpg
- www/discord2.jpg
- www/Discuss.png
- www/disqus.jpg
- www/disqus_36x36.jpg
- www/DouYin.png
- www/dwang.jpg
- www/dwang_36x36.jpg
- www/dwang2.png
- www/Dynasty_Hotel_Tang.png
- www/ENG.png
- www/Esquire_Kitchen.png
- www/facebook.jpg
- www/facebook_36x36.jpg
- www/facebook2.jpg
- www/facebook2_36x36.jpg
- www/FB.jpeg
- www/FossCom1.png
- www/FossCom2.png
- www/fuji-xerox.jpg
- www/gblinks.JPG
- www/getronics.png
- www/github.jpg
- www/github_36x36.jpg
- www/github2.jpg
- www/github2_36x36.jpg
- www/github3.jpg
- www/github3_36x36.jpg
- www/Github_Pages.png
- www/Golden-Royal.png
- www/gplus.jpg
- www/gplus_36x36.jpg
- www/guokr.jpeg
- www/HKUST.png
- www/hong.jpg
- www/hot.jpg
- www/idealseed.jpg
- www/IG1.png
- www/IG2.png
- www/IG3.png
- www/IG4.png
- www/IG5.png
- www/Illinois.jpg
- www/instagram.jpg
- www/instagram_36x36.jpg
- www/instagram2.jpg
- www/instagram2_36x36.jpg
- www/instagram3.jpg
- www/instagram3_36x36.jpg
- www/InventKDE1.jpeg
- www/InventKDE2.png
- www/iq.png
- www/jckl.png
- www/JEES.gif
- www/JFKL.jpg
- www/jg.jpg
- www/jg_36x36.jpg
- www/JG1.png
- www/JG2.png
- www/jhu.jpg
- www/JianShu.png
- www/joey_jeans.jpg
- www/KuaiShou.png
- www/ladbrokes.jpg
- www/library.jpg
- www/library2.jpg
- www/library3.jpg
- www/linkedin.jpg
- www/linkedin_36x36.jpg
- www/linkedIn.jpeg
- www/LinuxConfig1.jpg
- www/LinuxConfig2.png
- www/LQ.jpg
- www/LQ_36x36.jpg
- www/LQ2.jpg
- www/LQ2_36x36.jpg
- www/ltree.png
- www/madio.png
- www/manpower.jpg
- www/mas.jpg
- www/math & stats.jpg
- www/math-3d-hd-wallpaper.jpg
- www/math-theme-03.jpg
- www/mathchina.jpg
- www/mathchina_36x36.jpg
- www/maths.jpg
- www/MClub.png
- www/Me byteDance.jpg
- www/me light mode.jpg
- www/me.JPG
- www/me light mode.jpg
- www/medium.png
- www/mindpearl01.jpg
- www/mindpearl02.jpg
- www/my-passport-size-photo.jpg
- www/no-sex-at-the-moment.png
- www/NYIF.jpeg
- www/NYU.png
- www/nyu.png
- www/oda-army.jpg
- www/OKru.png
- www/oksportcn_01.png
- www/oksportcn_02.png
- www/oksportcn_03.png
- www/oksportcn_04.png
- www/Orchard.jpg
- www/PAAC.jpg
- www/Peking University 02.png
- www/phabricator.png
- www/pixnet.jpeg
- www/plotly.jpg
- www/plotly_36x36.jpg
- www/PLounge.jpg
- www/PLounge_36x36.jpg
- www/prestige.png
- www/qi-pioneer-logo.png
- www/QQ wb.jpg
- www/QQ wb_36x36.jpg
- www/QQ.jpg
- www/QQ_36x36.jpg
- www/qi-pioneer-logo.png
- www/quant_trader_adj.jpg
- www/quantitative trader.jpg
- www/quantitative trader 1.jpg
- www/quantitative trader 2.jpg
- www/quantitative_trader.jpg
- www/Quora.jpg
- www/Qzone.jpg
- www/Qzone_36x36.jpg
- www/RB.png
- www/rcrown.jpg
- www/Reddit.png
- www/retailsshop.jpg
- www/RG.png
- www/rnable.jpg
- www/rnable_36x36.jpg
- www/rstudio.jpg
- www/RStudioCom1.png
- www/RStudioCom2.png
- www/RT1.jpg
- www/RT2.jpg
- www/RT3.jpg
- www/RXforum.jpg
- www/RXforum_36x36.jpg
- www/RYO-Photo.jpg
- www/RYO.jpg
- www/RYU.jpg
- www/SBR.jpg
- www/SBR_36x36.jpg
- www/Scibrokes.png
- www/scb_logo.jpg
- www/scb_logo2.jpg
- www/scb-logo3.jpg
- www/scb-logo3rs.jpg
- www/Scibrokes®-TonyStark®.jpg
- www/Scibrokes-TonyStark.png
- www/scicom.jpg
- www/SE.png
- www/ShirotoNorimichi.jpg
- www/ShirotoNorimichi2.jpg
- www/skype.jpg
- www/skype_36x36.jpg
- www/social.jpg
- www/social_36x34.jpg
- www/SocialMedia.jpg
- www/SOF.jpg
- www/starlizard.jpg
- www/stats.jpg
- www/Steam.jpeg
- www/talkstats.jpg
- www/talkstats_36x36.jpg
- www/TARC.jpg
- www/telebiz.jpg
- www/Thumbs.db
- www/tm.jpg
- www/TonyStark.png
- www/tsujiki-mart.png
- www/Tumblr.png
- www/Tumblr1.png
- www/Tumblr2.jpeg
- www/Tumblr3.jpg
- www/twitter.jpg
- www/twitter_36x36.jpg
- www/u-drive-media.jpg
- www/u-of-i-urbana-2.png
- www/UCSC.jpeg
- www/ucsc.jpg
- www/um.jpg
- www/UoP-logo.jpg
- www/UST.jpg
- www/uwants.png
- www/vimeo.jpg
- www/vk.png
- www/Wechat.jpeg
- www/Wechat1.png
- www/Wechat2.png
- www/weibo.jpg
- www/weibo_36x36.jpg
- www/wordpress.jpg
- www/wordpress_36x36.jpg
- www/Wechat1.png
- www/Wechat2.png
- www/xerox.jpg
- www/xueba.jpg
- www/xueba1.jpg
- www/xueba2.jpg
- www/xueba2.png
- www/xueba3.jpg
- www/Yandex.png
- www/YouTube.jpeg
- www/zeef.jpg
- www/zeef_36x36.jpg
- www/ZhiHu.png
- www/zoom.jpeg
- www/βεst Jοεγ 7.jpg
- www/βεst Jοεγ 8.jpg
- www/βεst Jοεγ 胸有大痣.png
- www/βεst Jοεγ.jpg
- www/中国区划.gif
- www/美国省区旗.png
- www/βεst Jοεγ 胸有大痣.png
- data/dfm.csv
- data/kellym.txt
- data/shinyData.rds
- data/worldcities.csv
- function/buildFund.R
- function/libs.R
- function/plotChart.R
- music/bigmoney.mp3
- www/b4TDbiz-.pdf
- www/韩国情信.mp4
- documents/Coursera Illinous  - Data Mining - 01 Data Visualization.pdf
- documents/Coursera Illinous - Data Mining - 02 Text Retrieval and Search Engines.pdf
- documents/Coursera Illinous - Data Mining - 03 Text Mining and Analytics.pdf
- documents/Coursera Illinous - Improving Business Finances and Operations - 02 Managerial
  Accounting - Tools for Facilitating and Guiding Business Decisions.pdf
- documents/Coursera Illinous - Improving Business Finances and Operations - 04 Financial
  Evaluation and Strategy - Corporate Finance.pdf
- documents/Coursera Illinous - Improving Business Finances and Operations - 05 Operations
  Management.pdf
- documents/Coursera Johns Hopkins - 01 Data Science Toolbox 2014.pdf
- documents/Coursera Johns Hopkins - 02 R Programming.pdf
- documents/Coursera Johns Hopkins - 03 Getting and Cleaning Data 2014.pdf
- documents/Coursera Johns Hopkins - 04 Exploratory Data Analysis.pdf
- documents/Coursera Johns Hopkins - 05 Reproducible Research.pdf
- documents/Coursera Johns Hopkins - 06 Statistical Inference.pdf
- documents/Coursera Johns Hopkins - 07 Regression Models.pdf
- documents/Coursera Johns Hopkins - 08 Pratical Machine Learning.pdf
- documents/Coursera Johns Hopkins - 09 Develeoping Data Products.pdf
- documents/Coursera Johns Hopkins - 10 Data Science Capstone.pdf
- documents/Coursera Johns Hopkins - 11 Completed 10 Courses in Data Science.pdf
- documents/Coursera Michigan - Programming for Everybody (Python).pdf
- documents/DataCamp - Data Analysis and Statistical Inference.pdf
- documents/DataCamp - Intro to Computational Finance with R.pdf
- documents/DataCamp - Introduction to R.pdf
- documents/DataCamp - Kaggle R Tutorial on Machine Learning.pdf
- documents/Google Analytics.pdf
- documents/JLPT Certificate.jpg
- documents/Scicom Appreciation Certificate.jpg
- documents/Scicom CS Workshop.jpg
- documents/SPM Certificate.jpg
- documents/Ryo Eng_Introduction to Machine Learning for Trading_certificate.pdf
- documents/Ryo Eng_Quantitative Trading Strategies and Models_certificate.pdf
- documents/Ryo, Eng Lian Hu_Trading using Options Sentiment Indicators_certificate.pdf
- documents/Coursera JHU 01 - The R Programming Environment.pdf
- documents/Coursera JHU 02 - Advanced R Programming.pdf
- documents/Coursera JHU 03 - Building R Packages.pdf
- documents/Coursera JHU 04 - Building Data Visualization Tools.pdf
- documents/Coursera JHU 05 - Mastering Software Development in R Capstone.pdf
- documents/Coursera NYU - Overview of Advanced Methods of Reinforcement Learning in Finance.pdf
- documents/Coursera Peking - Bioinformatics - Hidden Markov Models (生物信息学 - 隐马尔科夫链).pdf
- documents/Coursera California - Bayesian Statistics Mixture Models.pdf
- music/小松拓也 - 不知道方向 Takuya Komatsu (原创) - (Better Ownself).mp3
runtime: shiny
---

明治維新は、まずは西欧から「学ぶ」ことに特化したのである。

# 设定

## SCSS 设置

<style>
pre {
  overflow-x: auto;
}
pre code {
  word-wrap: normal;
  white-space: pre;
}
.table-hover > tbody > tr:hover { 
  background-color: #8D918D;
}
</style>

```{r load-sass, class.source='bg-success', class.output='bg-primary'}
# install.packages('remotes', dependencies = TRUE, INSTALL_opts = '--no-lock')
library('BBmisc', 'rmsfuns')
#remotes::install_github("rstudio/sass")
lib('sass')

## https://support.rstudio.com/hc/en-us/articles/200532197
## https://community.rstudio.com/t/r-does-not-display-korean-chinese/30889/3?u=englianhu
#Sys.setlocale("LC_CTYPE", "en_US.UTF-8")
#Sys.setlocale("LC_CTYPE", "zh_CN.UTF-8")
#Sys.setlocale(category = "LC_CTYPE", "Chinese (Simplified)_China.936")
#Sys.setlocale(locale = "Chinese")
#Sys.setlocale(locale = "Japanese")
#Sys.setlocale(locale = "English")

# rmarkdown::render('/home/englianhu/Documents/owner/ryo-cn.Rmd',  encoding = 'UTF-8')
#Sys.setlocale("LC_CTYPE", "UTF-8")
#Sys.setlocale(locale = "UTF-8")
#Sys.setlocale(category = "LC_ALL", locale = "chs")
#Sys.setlocale(category = "LC_ALL", locale = "UTF-8")
#Sys.setlocale(category = "LC_ALL", locale = "Chinese")
#Sys.setlocale(category = "LC_ALL", locale = "zh_CN.UTF-8")
Sys.setlocale("LC_ALL", "en_US.UTF-8")
```

```{scss set-scss, class.source='bg-success', class.output='bg-primary'}
/* https://stackoverflow.com/a/66029010/3806250 */
h1 { color: #002C54; }
h2 { color: #2F496E; }
h3 { color: #375E97; }
h4 { color: #556DAC; }
h5 { color: #92AAC7; }

/* ----------------------------------------------------------------- */
/* https://gist.github.com/himynameisdave/c7a7ed14500d29e58149#file-broken-gradient-animation-less */
.hover01 {
  /* color: #FFD64D; */
  background: linear-gradient(155deg, #EDAE01 0%, #FFEB94 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #EDAE01 20%, #FFEB94 80%);
    }
  }

.hover02 {
  color: #FFD64D;
  background: linear-gradient(155deg, #002C54 0%, #4CB5F5 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #002C54 20%, #4CB5F5 80%);
    }
  }

.hover03 {
  color: #FFD64D;
  background: linear-gradient(155deg, #A10115 0%, #FF3C5C 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #A10115 20%, #FF3C5C 80%);
    }
  }
```

```{r gb-opts, class.source='hover01', class.output='hover02'}
## Set the timezone but not change the datetime
Sys.setenv(TZ = 'Asia/Shanghai')

## Setting to omit all warnings
## https://stackoverflow.com/a/36846793/3806250
## Set width
## options(knitr.table.format = 'html') will set all kableExtra tables to be 'html', otherwise need to set the parameter on every single table.
options(warn = -1, width = 999, knitr.table.format = 'html')#, digits.secs = 6)

## https://stackoverflow.com/questions/39417003/long-vectors-not-supported-yet-abnor-in-rmd-but-not-in-r-script
## https://yihui.org/knitr/options
knitr::opts_chunk$set(
  class.source = 'hover01', class.output = 'hover02', class.error = 'hover03', 
  message = FALSE, warning = FALSE, error = TRUE, 
  autodep = TRUE, aniopts = 'loop', 
  progress = TRUE, verbose = TRUE, 
  cache = FALSE, cache.lazy = FALSE, result = 'asis')
```

<br><br>

## 设置

```{r libs, eval=FALSE}
## Setup Options, Loading Required Libraries and Preparing Environment
## Loading the packages and setting adjustment
source('function/libs.R')
```

```{r setup, include=FALSE}
## Setup Options, Loading Required Libraries and Preparing Environment

## Loading the package 'BBmisc'
if(suppressMessages(!require('BBmisc'))){
  install.packages('BBmisc', dependencies = TRUE, INSTALL_opts = '--no-lock')
  suppressMessages(library('BBmisc'))
}
if (suppressMessages(!require('rmsfuns'))) {
  install.packages('rmsfuns', dependencies = TRUE, INSTALL_opts = '--no-lock')
  suppressMessages(library('rmsfuns'))
}

if(!require('REmap')) devtools::install_github('lchiffon/REmap')

## Loading multiple packages at once
pkgs <- c('readr', 'plyr', 'dplyr', 'magrittr', 'tidyverse', 'devtools', 'zoo', 'lubridate', 'stringr', 'rvest', 'markdown', 'googleVis', 'knitr', 'rmarkdown', 'htmltools', 'knitr', 'kableExtra', 'formattable', 'echarts4r', 'radarchart', 'MASS', 'htmlwidgets', 'REmap', 'ggmap', 'vembedr')

suppressAll(lib(pkgs))
load_pkg(pkgs)
rm(pkgs)

conflict_prefer('mutate', 'dplyr')
conflict_prefer('rename', 'dplyr')
conflict_prefer('filter', 'dplyr')
conflict_prefer('select', 'dplyr')
conflict_prefer('layout', 'plotly')

## Set the googleVis options first to change the behaviour of plot.gvis, so that 
##  only the chart component of the HTML file is written into the output file.
op <- options(gvis.plot.tag = 'chart')

## <audio src='music/bigmoney.mp3' autoplay controls loop></audio>
```

```{r, error = TRUE, results='asis'}
#remotes::install_git("https://gitee.com/JohnCoene/echarts4r")
lib('echarts4r')

mtcars |> 
  e_charts(disp) |> 
  e_scatter(mpg, qsec) |> 
  e_loess(mpg ~ disp)

iris |> 
  group_by(Species) |> 
  e_charts(Sepal.Length) |> 
  e_line(Sepal.Width) |> 
  e_lm(Sepal.Width ~ Sepal.Length) |> 
  e_x_axis(min = 4)

df <- data.frame(
  x = seq(50),
  y = rnorm(50, 10, 3),
  z = rnorm(50, 11, 2),
  w = rnorm(50, 9, 2)
)

df |> 
  e_charts(x) |> 
  e_line(z) |> 
  e_area(w) |> 
  e_title("Line and area charts")

df |> 
  e_charts(x) |> 
  e_polar() |> 
  e_angle_axis(x) |> # angle = x
  e_radius_axis() |> 
  e_bar(y, coord_system = "polar") |> 
  e_scatter(z, coord_system = "polar")

df |> 
  head(10) |> 
  e_charts(x) |> 
  e_polar() |> 
  e_angle_axis() |> 
  e_radius_axis(x) |> 
  e_bar(y, coord_system = "polar") |> 
  e_scatter(z, coord_system = "polar")

df <- data.frame(
  x = LETTERS[1:5],
  y = runif(5, 1, 5),
  z = runif(5, 3, 7)
)

df |> 
  e_charts(x) |> 
  e_radar(y, max = 7, name = "radar") |>
  e_radar(z, max = 7, name = "chart") |>
  e_tooltip(trigger = "item")
```

```{r skill, error = TRUE, message = FALSE, warning = FALSE, echo = FALSE, result = 'asis'}
require('dplyr', quietly = TRUE, warn.conflicts = FALSE)
require('magrittr', quietly = TRUE, warn.conflicts = FALSE)
require('formattable', quietly = TRUE, warn.conflicts = FALSE)
require('knitr', quietly = TRUE, warn.conflicts = FALSE)
require('kableExtra', quietly = TRUE, warn.conflicts = FALSE)
conflict_prefer('filter', 'dplyr')
conflict_prefer('layout', 'plotly')
conflict_prefer('select', 'dplyr')

skill <- tibble(
  '技能' = c('计量经济学', '量化交易', '®编程', '微软办公软件', 'SQL语言', '派森编程语言', '数据分析', '客服工作', '体育博彩行业', '建立®Studio服务器', '统计学', '数据科学', '闪霓应用', '李呢克斯🐧操作系统', '网页应用程序接口', 'Sparklyr大数据分析', '量化分析', '高级®编程', 'modeltime / tidyverts / prophet', 'tidyverse / tidymodels', '张量Tensorflow / Pytorch', '浏览器驱动', 'FrontPage / 部署网站', 'Photoshop / Picsart'), 
  '程度' = c(9, 9, 9, 8, 3, 4, 9, 9, 7, 7, 6, 8, 8, 7, 6, 2, 8, 6, 7, 6, 2, 4, 3, 5))
skill <- tibble('序列' = 1:nrow(skill), skill)

skill |> 
    {\(.) dplyr::mutate(
      ., `技能` = cell_spec(`技能`, italic = TRUE, 
                           color = spec_color(seq(nrow(skill)), option = 'A', 
                                              begin = 0.1, end = 0.9), 
                           tooltip = paste0('程度: ', `程度`), angle = 3))}() |>#, 
    #Level = color_tile('#FFFDDC', 'darkgoldenrod')(Level)) |> 
  {\(.) mutate_if(., is.numeric, function(x){ 
    cell_spec(x, 'html', color = 
                spec_color(x, option = 'A', begin = 0.1, end = 0.9, 
                           direction = -1), angle = 20, 
              font_size = spec_font_size(x), bold = TRUE) })}() |> 
  {\(.) kbl(., caption = '技能评估（从新兵1至专业10）', escape = FALSE, align = 'c')}() |> 
  {\(.) kable_styling(., bootstrap_options = c('striped', 'hover', 'condensed', 'responsive'))}() |> 
  {\(.) row_spec(., 0, background = 'DimGrey', color = 'yellow')}()# %>% 
  #column_spec(1, background = 'CornflowerBlue', color = 'red') %>% 
  #column_spec(2, background = 'grey', color = 'black') %>% 
  #column_spec(2, background = 'grey', color = 'black')
```

```{r skill2B, error = TRUE, message = FALSE, warning = FALSE, echo = FALSE, result = 'asis'}
#radarchart::chartJSRadar(
#  skill[,-1], main = 'Skill Rating', width = '100%', height = '100%', 
#  maxScale = 10, labelSize = 'auto', showToolTipLabel = TRUE)

### ---------------------------

linear_gradient1 <- htmlwidgets::JS(
     "new echarts.graphic.LinearGradient(
     0, 0, 0, 1,
     [
       { offset: 0, color: '#EDAE01' },
       { offset: 1, color: '#FFEB94' }
     ])")

linear_gradient2 <- htmlwidgets::JS(
     "new echarts.graphic.LinearGradient(
     0, 0, 0, 1,
     [
       { offset: 0, color: '#002C54' },
       { offset: 1, color: '#4CB5F5' }
     ])")

skill |> 
  echarts4r::e_charts(`技能`) |> 
  echarts4r::e_radar(`程度`, max = 10, name = skill$`技能`, 
                     itemStyle = list(
                       color = linear_gradient1), 
                     areaStyle = list(
                       color = linear_gradient2)) |>
  echarts4r::e_tooltip(trigger = 'item')
```

```{r REmap-setting, echo=FALSE}
## Reinitialized the REmap setting
remap.init()
```

```{r read-data, echo=FALSE}
## Set a data frame format cities and randomly set country code
data = data.frame(country=mapNames('world'), value=5*sample(178)+200)

vec = c('Beijing','Tokyo','Shanghai','New York','Sydney','London','Bangkok',
        'Taipei','Moscow','Washington','Lyon','Milan','Rome','Macao',
        'Singapore','Hong Kong','Kuala Lumpur','Madrid','Geneva','Paris',
        'Melbourne','Boston','Washington','Liverpool','Brighton','Bali',
        'San Francisco','Jakarta','Ho Chi Minh','Brasilia','Barcelona',
        'Rio de Janeiro','Buenos Aires','Bern','Basel','Zurich','Manila',
        'Toronto','Vancouver','Budapest','New Delhi','Thimphu','Mumbai',
        'Cairo','Greater Johannesburg','Durban','Alexandria','Zaria','Dubai',
        'Istanbul','Mexico City','Sapporo','Osaka','Ulaanbaatar','Vienna')

## Get world city geocode by ggmap
#geodata = suppressAll(as.data.frame(cbind(ggmap::geocode(vec),vec)))
## Get world city geocode from simplemaps.com
## https://simplemaps.com/data/world-cities
geodata <- readr::read_csv('data/worldcities.csv', show_col_types = FALSE) |> 
  dplyr::filter(capital %in% c('primary', 'admin')) |> 
  dplyr::select(lng, lat, country, city) |> 
  dplyr::rename(lon = lng) |> 
  dplyr::mutate(lon = round(lon, 3))

countries <- geodata$country |> 
  unique()

## randomly set country codes
data <- data.frame(
  country = countries, 
  value = 5 * sample(length(countries)) + 200)

## cities
#vec <- geodata$city

## lon & lat of cities
geodata <- geodata |> 
  data.frame() |> 
  dplyr::select(lon, lat, city) |> 
  dplyr::rename(vec = city)

## Design a line data frame
#markLinedata <- data.frame(
#  origin = rep('Beijing', (length(vec) - 1)), 
#  destination = geodata$vec[!geodata$vec %in% 'Beijing'])

## Design a line data.frame
markLinedata = data.frame(origin=rep('Beijing', 54),destination = vec[-1])
```

```{r plot-map, echo=FALSE}
## Plot the REmap shining 
p <- remapC(data, maptype='world',color=c('black','black'),
       theme=get_theme(backgroundColor='black'),
       markPointData=vec, markLineData=markLinedata, geoData=geodata)
knitrREmap(p,local=F)
```

<iframe width="100%" height="450" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/221986532&amp;auto_play=true&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>

```{r, error = TRUE, results='asis'}
# Library
library(fmsb)
 
# Create data: note in High school for Jonathan:
data <- as.data.frame(matrix( sample( 2:20 , 10 , replace=T) , ncol=10))
colnames(data) <- c("math" , "english" , "biology" , "music" , "R-coding", "data-viz" , "french" , "physic", "statistic", "sport" )
 
# To use the fmsb package, I have to add 2 lines to the dataframe: the max and min of each topic to show on the plot!
data <- rbind(rep(20,10) , rep(0,10) , data)
 
# Check your data, it has to look like this!
# head(data)

# The default radar chart 
radarchart(data)


# Library
library(fmsb)
 
# Create data: note in High school for Jonathan:
data <- as.data.frame(matrix( sample( 2:20 , 10 , replace=T) , ncol=10))
colnames(data) <- c("math" , "english" , "biology" , "music" , "R-coding", "data-viz" , "french" , "physic", "statistic", "sport" )
 
# To use the fmsb package, I have to add 2 lines to the dataframe: the max and min of each topic to show on the plot!
data <- rbind(rep(20,10) , rep(0,10) , data)
 
# Check your data, it has to look like this!
# head(data)

# Custom the radarChart !
radarchart( data  , axistype=1 , 
 
    #custom polygon
    pcol=rgb(0.2,0.5,0.5,0.9) , pfcol=rgb(0.2,0.5,0.5,0.5) , plwd=4 , 
 
    #custom the grid
    cglcol="grey", cglty=1, axislabcol="grey", caxislabels=seq(0,20,5), cglwd=0.8,
 
    #custom labels
    vlcex=0.8 
    )
```

```{r, error = TRUE, results='asis'}
library(radarchart)

labs <- c("Communicator", "Data Wangler", "Programmer",
          "Technologist",  "Modeller", "Visualizer")

scores <- list(
  "Rich" = c(9, 7, 4, 5, 3, 7),
  "Andy" = c(7, 6, 6, 2, 6, 9),
  "Aimee" = c(6, 5, 8, 4, 7, 6)
)

chartJSRadar(scores = scores, labs = labs, maxScale = 10)

scores <- data.frame("Label"=c("Communicator", "Data Wangler", "Programmer",
                     "Technologist",  "Modeller", "Visualizer"),
                     "Rich" = c(9, 7, 4, 5, 3, 7),
                     "Andy" = c(7, 6, 6, 2, 6, 9),
                     "Aimee" = c(6, 5, 8, 4, 7, 6))

chartJSRadar(scores, maxScale = 10, showToolTipLabel=TRUE)

chartJSRadar(skills, main = "Data Science Radar")
chartJSRadarOutput("ID", width = "450", height = "300")
#runExampleApp("basic")
```

```{r, error = TRUE, results='asis'}
lib('fmsb', 'scales')
lib(c('ggradar', 'rescale', 'lattice', 'rgl', 'akima', 'metan'))

df_maxmin <- data.frame(
    drat = c(1, 0),
    wt = c(1, 0),
    qsec = c(1, 0),
    vs = c(1, 0),
    am = c(1, 0))

#load data
mtcars_radar <- mtcars %>% 
  as_tibble(rownames = "group") %>% 
  mutate_at(vars(-group), rescale) %>% 
  tail(2) %>% 
  dplyr::select(1,6:10)

#check data type with std() function
str(mtcars_radar)

mtcars_radar <- mtcars_radar[,c('drat','wt','qsec','vs','am')]
mtcars_radar <- rbind(df_maxmin, mtcars_radar)
fmsb::radarchart(mtcars_radar)
```

```{r, error = TRUE, results='asis'}
#devtools::install_github('ricardo-bion/ggradar', dependencies = TRUE, force = T)
#devtools::install_github("poissonconsulting/rescale")
lib(c('ggradar', 'rescale', 'lattice', 'rgl', 'akima', 'metan'))

x=runif(1000)
y=runif(1000)
z=rnorm(1000)
s=interp(x,y,z,duplicate="strip")
surface3d(s$x,s$y,s$z,color="blue")
points3d(s)


x <- seq(-10, 10, length.out = 50)  
y <- x  
rotsinc <- function(x,y) {
    sinc <- function(x) { y <- sin(x)/x ; y[is.na(y)] <- 1; y }  
    10 * sinc( sqrt(x^2+y^2) )  
}

z <- outer(x, y, rotsinc)  
persp(x, y, z)
surface3d(x, y, z)


# begin generating my 3D shape
b <- seq(from=0, to=20,by=0.5)
s <- seq(from=0, to=20,by=0.5)
payoff <- expand.grid(b=b,s=s)
payoff$payoff <- payoff$b - payoff$s
payoff$payoff[payoff$payoff < -1] <- -1
# end generating my 3D shape


wireframe(payoff ~ s * b, payoff, shade = TRUE, aspect = c(1, 1),
    light.source = c(10,10,10), main = "Study 1",
    scales = list(z.ticks=5,arrows=FALSE, col="black", font=10, tck=0.5),
    screen = list(z = 40, x = -75, y = 0))
```

```{r, error=TRUE, results='asis'}
plot_rgl_model_a <- function(fdata, plot_contour = T, plot_points = T, 
                             verbose = F, colour = "rainbow", smoother = F){
  ## takes a model in long form, in the format
  ## 1st column x
  ## 2nd is y,
  ## 3rd is z (height)
  ## and draws an rgl model

  ## includes a contour plot below and plots the points in blue
  ## if these are set to TRUE

  # note that x has to be ascending, followed by y
  if (verbose) print(head(fdata))

  fdata <- fdata[order(fdata[, 1], fdata[, 2]), ]
  if (verbose) print(head(fdata))
  ##
  require(reshape2)
  require(rgl)
  orig_names <- colnames(fdata)
  colnames(fdata) <- c("x", "y", "z")
  fdata <- as.data.frame(fdata)

  ## work out the min and max of x,y,z
  xlimits <- c(min(fdata$x, na.rm = T), max(fdata$x, na.rm = T))
  ylimits <- c(min(fdata$y, na.rm = T), max(fdata$y, na.rm = T))
  zlimits <- c(min(fdata$z, na.rm = T), max(fdata$z, na.rm = T))
  l <- list (x = xlimits, y = ylimits, z = zlimits)
  xyz <- do.call(expand.grid, l)
  if (verbose) print(xyz)
  x_boundaries <- xyz$x
  if (verbose) print(class(xyz$x))
  y_boundaries <- xyz$y
  if (verbose) print(class(xyz$y))
  z_boundaries <- xyz$z
  if (verbose) print(class(xyz$z))
  if (verbose) print(paste(x_boundaries, y_boundaries, z_boundaries, sep = ";"))

  # now turn fdata into a wide format for use with the rgl.surface
  fdata[, 2] <- as.character(fdata[, 2])
  fdata[, 3] <- as.character(fdata[, 3])
  #if (verbose) print(class(fdata[, 2]))
  wide_form <- dcast(fdata, y ~ x, value_var = "z")
  if (verbose) print(head(wide_form))
  wide_form_values <- as.matrix(wide_form[, 2:ncol(wide_form)])  
  if (verbose) print(wide_form_values)
  x_values <- as.numeric(colnames(wide_form[2:ncol(wide_form)]))
  y_values <- as.numeric(wide_form[, 1])
  if (verbose) print(x_values)
  if (verbose) print(y_values)
  wide_form_values <- wide_form_values[order(y_values), order(x_values)]
  wide_form_values <- as.numeric(wide_form_values)
  x_values <- x_values[order(x_values)]
  y_values <- y_values[order(y_values)]
  if (verbose) print(x_values)
  if (verbose) print(y_values)

  if (verbose) print(dim(wide_form_values))
  if (verbose) print(length(x_values))
  if (verbose) print(length(y_values))

  zlim <- range(wide_form_values)
  if (verbose) print(zlim)
  zlen <- zlim[2] - zlim[1] + 1
  if (verbose) print(zlen)

  if (colour == "rainbow"){
    colourut <- rainbow(zlen, alpha = 0)
    if (verbose) print(colourut)
    col <- colourut[ wide_form_values - zlim[1] + 1]
    # if (verbose) print(col)
  } else {
    col <- "grey"
    if (verbose) print(table(col2))
  }


  open3d()
  plot3d(x_boundaries, y_boundaries, z_boundaries, 
         box = T, col = "black",  xlab = orig_names[1], 
         ylab = orig_names[2], zlab = orig_names[3])

  rgl.surface(z = x_values,  ## these are all different because
              x = y_values,  ## of the confusing way that 
              y = wide_form_values,  ## rgl.surface works! - y is the height!
              coords = c(2,3,1),
              color = col,
              alpha = 1.0,
              lit = F,
              smooth = smoother)

  if (plot_points){
    # plot points in red just to be on the safe side!
    points3d(fdata, col = "blue")
  }

  if (plot_contour){
    # plot the plane underneath
    flat_matrix <- wide_form_values
    if (verbose) print(flat_matrix)
    y_intercept <- (zlim[2] - zlim[1]) * (-2/3) # put the flat matrix 1/2 the distance below the lower height 
    flat_matrix[which(flat_matrix != y_intercept)] <- y_intercept
    if (verbose) print(flat_matrix)

    rgl.surface(z = x_values,  ## these are all different because
                x = y_values,  ## of the confusing way that 
                y = flat_matrix,  ## rgl.surface works! - y is the height!
                coords = c(2,3,1),
                color = col,
                alpha = 1.0,
                smooth = smoother)
  }
}



add_rgl_model <- function(fdata){

  ## takes a model in long form, in the format
  ## 1st column x
  ## 2nd is y,
  ## 3rd is z (height)
  ## and draws an rgl model

  ##
  # note that x has to be ascending, followed by y
  print(head(fdata))

  fdata <- fdata[order(fdata[, 1], fdata[, 2]), ]

  print(head(fdata))
  ##
  require(reshape2)
  require(rgl)
  orig_names <- colnames(fdata)

  #print(head(fdata))
  colnames(fdata) <- c("x", "y", "z")
  fdata <- as.data.frame(fdata)

  ## work out the min and max of x,y,z
  xlimits <- c(min(fdata$x, na.rm = T), max(fdata$x, na.rm = T))
  ylimits <- c(min(fdata$y, na.rm = T), max(fdata$y, na.rm = T))
  zlimits <- c(min(fdata$z, na.rm = T), max(fdata$z, na.rm = T))
  l <- list (x = xlimits, y = ylimits, z = zlimits)
  xyz <- do.call(expand.grid, l)
  #print(xyz)
  x_boundaries <- xyz$x
  #print(class(xyz$x))
  y_boundaries <- xyz$y
  #print(class(xyz$y))
  z_boundaries <- xyz$z
  #print(class(xyz$z))

  # now turn fdata into a wide format for use with the rgl.surface
  fdata[, 2] <- as.character(fdata[, 2])
  fdata[, 3] <- as.character(fdata[, 3])
  #print(class(fdata[, 2]))
  wide_form <- dcast(fdata, y ~ x, value_var = "z")
  print(head(wide_form))
  wide_form_values <- as.matrix(wide_form[, 2:ncol(wide_form)])  
  x_values <- as.numeric(colnames(wide_form[2:ncol(wide_form)]))
  y_values <- as.numeric(wide_form[, 1])
  print(x_values)
  print(y_values)
  wide_form_values <- wide_form_values[order(y_values), order(x_values)]
  x_values <- x_values[order(x_values)]
  y_values <- y_values[order(y_values)]
  print(x_values)
  print(y_values)

  print(dim(wide_form_values))
  print(length(x_values))
  print(length(y_values))

  rgl.surface(z = x_values,  ## these are all different because
              x = y_values,  ## of the confusing way that 
              y = wide_form_values,  ## rgl.surface works!
              coords = c(2,3,1),
              alpha = .8)
  # plot points in red just to be on the safe side!
  points3d(fdata, col = "red")
}
```

```{r, error=TRUE, results='asis'}
x=runif(1000)
y=runif(1000)
z=rnorm(1000)
s=interp(x,y,z,duplicate="strip")
surface3d(s$x,s$y,s$z,color="blue")
points3d(s)
```

```{r, error=TRUE, results='asis'}
lib('ggplot2')
lib('rayshader')
conflict_prefer("select", "dplyr")

df <- data.frame(
  YearMonth = c(202101L,202101L,202101L,
                202102L,202102L,202102L,202103L,202103L,202103L),
  Product = c("bike","car","skateboard",
              "bike","car","skateboard","bike","car","skateboard"),
  Sales = c(100L, 40L, 60L, 70L, 30L, 50L, 50L, 20L, 30L)
)
df <- rbind(df, subset(df, subset = Product == "bike"))
df$height <- match(df$YearMonth, sort(unique(df$YearMonth)))
df

# Define a new coordinate system from coord_polar
coord_radar <- function(theta = "x", start = 0, direction = 1, clip = "on") {
  theta <- match.arg(theta, c("x", "y"))
  r <- if (theta == "x")
    "y"
  else "x"
  ggproto(NULL, CoordPolar, theta = theta, r = r, start = start,
          direction = sign(direction), clip = clip,
          # This is the change to make the lines straight
          is_linear = function() TRUE
          )
}

plot2d <- ggplot(df, aes(x = Product, y = Sales, color = height)) + 
  geom_path(aes(group = YearMonth)) + 
  scale_color_continuous() +
  guides(color = "none") + 
  coord_radar()

plot_gg(plot2d, raytrace = FALSE)
```

```{r, error=TRUE, results='asis'}
library(tidyverse)
library(shiny)
library(plotly)

pokemons <- 
read_table('
  name      hp  defense attack sp_attack sp_defense speed
  Bulbasaur 45      49     49        65         65    45
    Ivysaur 60      63     62        80         80    60
   Venusaur 80     123    100       122        120    80
 Charmander 39      43     52        60         50    65
 Charmeleon 58      58     64        80         65    80
  Charizard 78      78    104       159        115   100')



ui <- navbarPage(title = "Pokemon Research",

                 tabPanel(title = "Pokemon Statistics",
                          sidebarPanel(
                              selectInput(inputId = "indv",
                                          label = "Pokemon",
                                          choices = pokemons$name, 
                                          selected = 'Bulbasaur')
                              ),
                          mainPanel(
                              plotlyOutput('radar') #the radar plot
                          )
                          ))

server <- function(input, output, session) {

    output$radar <- renderPlotly({
        pkmn <- filter(pokemons, name == input$indv)
        
        r <- map_dbl(pkmn[, 2:6], ~.x)
        nms <- names(r)
        
        #code to plot the radar
        fig <- plot_ly(
            type = 'scatterpolar',
            r = r,
            theta = nms,
            fill = 'toself',
            mode = 'markers'
        ) 
        fig <- fig %>%
            layout(
                polar = list(
                    radialaxis = list(
                        visible = T,
                        range = c(0,max(r))
                    )
                ),
                showlegend = F
            )
    })
}

shinyApp(ui, server)
```

```{r, error=TRUE, results='asis'}
## https://codepen.io/duggi/pen/gPjrKM#_=_
## https://xiangyun.rbind.io/2021/11/interactive-web-graphics
lib('apexcharter')

mtcars$model <- rownames(mtcars)
apex(data = head(mtcars), type = "radar", mapping = aes(x = model, y = qsec))

# extremely complicated reshaping
new_mtcars <- reshape(
  data = head(mtcars), 
  idvar = "model", 
  varying = list(c("drat", "wt")),
  times = c("drat", "wt"),
  direction = "long",
  v.names = "value",
  drop = c("mpg", "cyl", "hp", "dist", "qsec", "vs", "am", "gear", "carb")
)

apex(data = new_mtcars, type = "radar", mapping = aes(x = model, y = value, group = time))
```

```{r, eval=FALSE, error=TRUE, results='asis'}
lib('JuliaCall')
julia_install_package_if_needed("Optim")
julia_installed_package("Optim")
#> [1] "0.22.0"
julia_library("Optim")

```

我正在使用 `echarts4r` 创建一个圆环图.现在我正在尝试添加自定义工具提示，并且可以复制此处给出的示例 [`Echarts4r` : Create stacked area chart with percentage from total in tooltip](https://stackoverflow.com/questions/52413944/echarts4r-create-stacked-area-chart-with-percentage-from-total-in-tooltip) 和这里 [Displaying extra variables in tooltips `echarts4r`](https://stackoverflow.com/questions/50554304/displaying-extra-variables-in-tooltips-echarts4r#) .但是，我不太明白这是如何扩展到饼图的。我想要一个带有工具提示的饼图，显示总数和相对百分比

```{r, error=TRUE, results='asis'}
library(tidyverse)
library(echarts4r)

My_df <- data.frame(n = c(1, 4, 10), 
                    x = c("A", "B", " C")) %>%
  mutate(percent = round(n/sum(n), 2) )

My_df %>%
  e_charts(x)  %>% 
  e_pie(n, radius = c("50%", "70%")) %>%
  e_tooltip()
```

这是我迄今为止最好的一次拍摄

```{r, error=TRUE, results='asis'}
My_df %>%
  e_charts(x)  %>% 
  e_pie(n, radius = c("50%", "70%")) %>%
  e_tooltip(formatter = htmlwidgets::JS("
                                        function(params){
                                        return('<strong>' + params.name + 
                                        '</strong><br />total: ' + params.value + 
                                        '<br />percent: ' +  params.value[1])   }  "))
```

在散点图示例中，使用 bind = 附加了额外的值。但这不适用于饼图。
最佳答案

你不能用`params.percent ?`

```{r, error=TRUE, results='asis'}
My_df %>%
  e_charts(x)  %>% 
  e_pie(n, radius = c("50%", "70%")) %>%
  e_tooltip(formatter = htmlwidgets::JS("
                                        function(params){
                                        return('<strong>' + params.name + 
                                        '</strong><br />total: ' + params.value + 
                                        '<br />percent: ' +  params.percent)  +'%' }  "))
```

您也可以使用 [Javascript template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals) 整理一下。

```{r, error=TRUE, results='asis'}
My_df %>%
  e_charts(x)  %>% 
  e_pie(n, radius = c("50%", "70%")) %>%
  e_tooltip(formatter = htmlwidgets::JS("
                                        function(params)
                                        {
                                            return `<strong>${params.name}</strong>
                                                    <br/>Total: ${params.value}
                                                    <br/>Percent: ${params.percent}%`
                                        }  "))
```

```{r, error=TRUE, results='asis'}
My_df %>%
  e_charts(x)  %>% 
  e_radar(n, radius = c("50%", "70%")) %>%
  e_tooltip(formatter = htmlwidgets::JS("
                                        function(params)
                                        {
                                            return `<strong>${params.name}</strong>
                                                    <br/>Total: ${params.value}
                                                    <br/>Percent: ${params.percent}%`
                                        }  "))
```

```{r, error=TRUE, results='asis'}

```

```{r, error=TRUE, results='asis'}

```

```{r, error=TRUE, results='asis'}

```

```{r, error=TRUE, results='asis'}

```





